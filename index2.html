<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nh√† Kh√°m Ph√° H·ªá M·∫∑t Tr·ªùi 2D</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c2e 0%, #1a1a3e 50%, #2d1b69 100%);
            overflow: hidden;
            color: white;
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #canvas2d {
            position: absolute;
            top: 0;
            left: 0;
            cursor: grab;
        }

        #canvas2d:active {
            cursor: grabbing;
        }

        .ui-panel {
            position: absolute;
            background: rgba(0, 20, 40, 0.9);
            border: 2px solid #4a90e2;
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .control-panel {
            top: 20px;
            left: 20px;
            width: 300px;
        }

        .info-panel {
            top: 20px;
            right: 20px;
            width: 350px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .bottom-panel {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            align-items: center;
        }

        h2 {
            color: #64b5f6;
            margin-bottom: 15px;
            font-size: 18px;
        }

        h3 {
            color: #81c784;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #b3e5fc;
            font-size: 14px;
        }

        input[type="range"] {
            width: 100%;
            margin-bottom: 10px;
        }

        button {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        button:hover {
            background: linear-gradient(45deg, #357abd, #2968a3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
        }

        button.active {
            background: linear-gradient(45deg, #81c784, #66bb6a);
            box-shadow: 0 2px 8px rgba(129, 199, 132, 0.5);
        }

        .planet-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #4a90e2;
        }

        .measurement-display {
            background: rgba(129, 199, 132, 0.2);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .speed-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .speed-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .speed-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffeb3b, #f44336);
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div class="stars" id="stars"></div>
        
        <canvas id="canvas2d"></canvas>
        
        <div class="ui-panel control-panel">
            <h2>üöÄ ƒêi·ªÅu Khi·ªÉn Kh√°m Ph√°</h2>
            
            <div class="control-group">
                <label>T·ªëc ƒë·ªô th·ªùi gian:</label>
                <input type="range" id="timeSpeed" min="0" max="5" value="1" step="0.1">
                <div class="speed-indicator">
                    <span>Ch·∫≠m</span>
                    <div class="speed-bar">
                        <div class="speed-fill" id="speedFill"></div>
                    </div>
                    <span>Nhanh</span>
                </div>
            </div>

            <div class="control-group">
                <label>Kho·∫£ng c√°ch camera:</label>
                <input type="range" id="cameraDistance" min="200" max="800" value="400">
            </div>

            <div class="control-group">
                <button id="pauseBtn">‚è∏Ô∏è T·∫°m d·ª´ng</button>
                <button id="resetBtn">üîÑ ƒê·∫∑t l·∫°i</button>
            </div>

            <div class="control-group">
                <h3>Ch·∫ø ƒë·ªô xem:</h3>
                <button id="freeView" class="active">üéÆ T·ª± do</button>
                <button id="followEarth">üåç Theo Tr√°i ƒë·∫•t</button>
                <button id="followMars">üî¥ Theo Sao H·ªèa</button>
            </div>

            <div class="control-group">
                <button id="showOrbits">·∫®n qu·ªπ ƒë·∫°o</button>
                <button id="measureTool">üìè C√¥ng c·ª• ƒëo</button>
            </div>
        </div>

        <div class="ui-panel info-panel">
            <h2>üìö Th√¥ng Tin Kh√°m Ph√°</h2>
            <div id="planetInfo">
                <div class="planet-info">
                    <h3>üåû M·∫∑t Tr·ªùi</h3>
                    <p><strong>ƒê∆∞·ªùng k√≠nh:</strong> 1,392,700 km</p>
                    <p><strong>Kh·ªëi l∆∞·ª£ng:</strong> 1.989 √ó 10¬≥‚Å∞ kg</p>
                    <p><strong>Nhi·ªát ƒë·ªô b·ªÅ m·∫∑t:</strong> 5,778 K</p>
                </div>

                <div class="planet-info">
                    <h3>üåç Tr√°i ƒê·∫•t</h3>
                    <p><strong>Kho·∫£ng c√°ch t·ª´ M·∫∑t Tr·ªùi:</strong> 149.6 tri·ªáu km</p>
                    <p><strong>Chu k·ª≥ qu·ªπ ƒë·∫°o:</strong> 365.25 ng√†y</p>
                    <p><strong>ƒê∆∞·ªùng k√≠nh:</strong> 12,742 km</p>
                    <p><strong>V·ªá tinh:</strong> M·∫∑t TrƒÉng</p>
                </div>

                <div class="planet-info">
                    <h3>üåô M·∫∑t TrƒÉng</h3>
                    <p><strong>Kho·∫£ng c√°ch t·ª´ Tr√°i ƒê·∫•t:</strong> 384,400 km</p>
                    <p><strong>Chu k·ª≥ qu·ªπ ƒë·∫°o:</strong> 27.3 ng√†y</p>
                    <p><strong>ƒê∆∞·ªùng k√≠nh:</strong> 3,474 km</p>
                </div>

                <div class="planet-info">
                    <h3>üî¥ Sao H·ªèa</h3>
                    <p><strong>Kho·∫£ng c√°ch t·ª´ M·∫∑t Tr·ªùi:</strong> 227.9 tri·ªáu km</p>
                    <p><strong>Chu k·ª≥ qu·ªπ ƒë·∫°o:</strong> 687 ng√†y Tr√°i ƒê·∫•t</p>
                    <p><strong>ƒê∆∞·ªùng k√≠nh:</strong> 6,779 km</p>
                    <p><strong>Bi·ªát danh:</strong> H√†nh tinh ƒê·ªè</p>
                </div>
            </div>

            <div id="measurementInfo" class="measurement-display" style="display: none;">
                <h3>üìè K·∫øt qu·∫£ ƒëo l∆∞·ªùng:</h3>
                <div id="distanceResult">Nh·∫•p v√†o 2 ƒëi·ªÉm tr√™n b·∫£n ƒë·ªì ƒë·ªÉ ƒëo.</div>
            </div>
        </div>

        <div class="ui-panel bottom-panel">
            <div style="text-align: center;">
                <div style="font-size: 14px; margin-bottom: 5px;">Th·ªùi gian m√¥ ph·ªèng:</div>
                <div id="simulationTime" style="font-size: 18px; font-weight: bold; color: #64b5f6;">Ng√†y 0</div>
            </div>
        </div>
    </div>

    <script>
        class SolarSystemExplorer {
            constructor() {
                this.canvas = document.getElementById('canvas2d');
                this.ctx = this.canvas.getContext('2d');
                this.setupCanvas();
                
                // Tr·∫°ng th√°i game
                this.isPaused = false;
                this.timeSpeed = 1;
                this.simulationDay = 0;
                this.cameraX = 0;
                this.cameraY = 0;
                this.cameraZoom = 1; // S·ª≠ d·ª•ng zoom thay cho distance
                this.viewMode = 'free';
                this.showOrbits = true;
                this.measureMode = false;
                this.measureStart = null;
                this.measureEnd = null;

                // T·ªâ l·ªá: 1 pixel t∆∞∆°ng ·ª©ng bao nhi√™u km
                this.KM_PER_PIXEL = 1_000_000;
                
                // V·∫≠t l√Ω v√† thi√™n th·ªÉ
                this.setupCelestialBodies();
                this.setupEventListeners();
                this.createStars();

                // C·∫≠p nh·∫≠t giao di·ªán l√∫c ƒë·∫ßu
                this.updateSpeedIndicator();
                
                // B·∫Øt ƒë·∫ßu animation
                this.animate();
            }

            setupCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                
                window.addEventListener('resize', () => {
                    this.canvas.width = window.innerWidth;
                    this.canvas.height = window.innerHeight;
                });
            }

            setupCelestialBodies() {
                this.sun = {
                    x: 0, y: 0,
                    radius: 30,
                    color: '#FDB813',
                    name: 'M·∫∑t Tr·ªùi'
                };

                this.earth = {
                    angle: 0,
                    orbitRadius: 150,
                    radius: 8,
                    color: '#4A90E2',
                    speed: 0.0172, // 2*PI / 365.25 ng√†y ~ 0.0172
                    name: 'Tr√°i ƒê·∫•t',
                    x: 0, y: 0
                };

                this.moon = {
                    angle: 0,
                    orbitRadius: 25,
                    radius: 2,
                    color: '#CCCCCC',
                    speed: 0.23, // 2*PI / 27.3 ng√†y ~ 0.23
                    name: 'M·∫∑t TrƒÉng',
                    x: 0, y: 0
                };

                this.mars = {
                    angle: Math.PI, // B·∫Øt ƒë·∫ßu ·ªü v·ªã tr√≠ ƒë·ªëi di·ªán Tr√°i ƒê·∫•t
                    orbitRadius: 230,
                    radius: 6,
                    color: '#CD5C5C',
                    speed: 0.0091, // 2*PI / 687 ng√†y ~ 0.0091
                    name: 'Sao H·ªèa',
                    x: 0, y: 0
                };
                
                this.celestialBodies = [this.sun, this.earth, this.moon, this.mars];
            }

            setupEventListeners() {
                const timeSpeedSlider = document.getElementById('timeSpeed');
                const cameraDistanceSlider = document.getElementById('cameraDistance');

                // ƒêi·ªÅu khi·ªÉn th·ªùi gian
                timeSpeedSlider.addEventListener('input', (e) => {
                    this.timeSpeed = parseFloat(e.target.value);
                    this.updateSpeedIndicator();
                });

                // ƒêi·ªÅu khi·ªÉn camera (zoom)
                cameraDistanceSlider.addEventListener('input', (e) => {
                    // Gi√° tr·ªã t·ª´ 200 ƒë·∫øn 800 -> zoom t·ª´ 2 (g·∫ßn) ƒë·∫øn 0.5 (xa)
                    this.cameraZoom = 1 / (parseInt(e.target.value) / 400);
                });

                // N√∫t ƒëi·ªÅu khi·ªÉn
                document.getElementById('pauseBtn').addEventListener('click', () => {
                    this.isPaused = !this.isPaused;
                    document.getElementById('pauseBtn').innerHTML = this.isPaused ? '‚ñ∂Ô∏è Ti·∫øp t·ª•c' : '‚è∏Ô∏è T·∫°m d·ª´ng';
                });

                document.getElementById('resetBtn').addEventListener('click', () => {
                    this.resetSimulation();
                });

                // Ch·∫ø ƒë·ªô xem
                document.getElementById('freeView').addEventListener('click', () => this.setViewMode('free'));
                document.getElementById('followEarth').addEventListener('click', () => this.setViewMode('earth'));
                document.getElementById('followMars').addEventListener('click', () => this.setViewMode('mars'));

                // Hi·ªÉn th·ªã qu·ªπ ƒë·∫°o
                document.getElementById('showOrbits').addEventListener('click', (e) => {
                    this.showOrbits = !this.showOrbits;
                    e.target.textContent = this.showOrbits ? '·∫®n qu·ªπ ƒë·∫°o' : 'Hi·ªán qu·ªπ ƒë·∫°o';
                });

                // C√¥ng c·ª• ƒëo
                document.getElementById('measureTool').addEventListener('click', (e) => {
                    this.measureMode = !this.measureMode;
                    e.target.classList.toggle('active', this.measureMode);
                    document.getElementById('measurementInfo').style.display = this.measureMode ? 'block' : 'none';
                    document.getElementById('distanceResult').innerHTML = "Nh·∫•p v√†o 2 ƒëi·ªÉm tr√™n b·∫£n ƒë·ªì ƒë·ªÉ ƒëo.";
                    this.measureStart = null;
                    this.measureEnd = null;
                });

                // ƒêi·ªÅu khi·ªÉn chu·ªôt
                let isDragging = false;
                let lastMouseX, lastMouseY;

                this.canvas.addEventListener('mousedown', (e) => {
                    if (this.measureMode) {
                        this.handleMeasureClick(e);
                    } else {
                        isDragging = true;
                        lastMouseX = e.clientX;
                        lastMouseY = e.clientY;
                    }
                });

                this.canvas.addEventListener('mousemove', (e) => {
                    if (isDragging && this.viewMode === 'free') {
                        const deltaX = e.clientX - lastMouseX;
                        const deltaY = e.clientY - lastMouseY;
                        // D·ªãch camera ng∆∞·ª£c l·∫°i v·ªõi h∆∞·ªõng k√©o chu·ªôt
                        this.cameraX += deltaX;
                        this.cameraY += deltaY;
                        lastMouseX = e.clientX;
                        lastMouseY = e.clientY;
                    }
                });

                // <<< S·ª¨A L·ªñI: Th√™m s·ª± ki·ªán mouseup v√† mouseleave ƒë·ªÉ d·ª´ng k√©o th·∫£
                const stopDragging = () => {
                    isDragging = false;
                };
                this.canvas.addEventListener('mouseup', stopDragging);
                this.canvas.addEventListener('mouseleave', stopDragging);
            } // <<< S·ª¨A L·ªñI: ƒê√≥ng h√†m setupEventListeners ·ªü ƒë√∫ng v·ªã tr√≠

            // <<< S·ª¨A L·ªñI: Di chuy·ªÉn resetSimulation() ra ngo√†i th√†nh m·ªôt ph∆∞∆°ng th·ª©c c·ªßa class
            resetSimulation() {
                this.simulationDay = 0;
                this.timeSpeed = 1;
                this.isPaused = false;
                document.getElementById('pauseBtn').innerHTML = '‚è∏Ô∏è T·∫°m d·ª´ng';
                document.getElementById('timeSpeed').value = 1;
                this.updateSpeedIndicator();
                
                this.setupCelestialBodies(); // ƒê·∫∑t l·∫°i v·ªã tr√≠ ban ƒë·∫ßu
                
                this.cameraX = 0;
                this.cameraY = 0;
                this.cameraZoom = 1;
                document.getElementById('cameraDistance').value = 400;

                this.setViewMode('free');
                this.measureStart = null;
                this.measureEnd = null;
            }

            // <<< TH√äM M·ªöI: H√†m c·∫≠p nh·∫≠t thanh ch·ªâ b√°o t·ªëc ƒë·ªô
            updateSpeedIndicator() {
                const speedSlider = document.getElementById('timeSpeed');
                const percentage = (this.timeSpeed / speedSlider.max) * 100;
                document.getElementById('speedFill').style.width = `${percentage}%`;
            }

            // <<< TH√äM M·ªöI: H√†m chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô xem
            setViewMode(mode) {
                this.viewMode = mode;
                document.querySelectorAll('.control-group button').forEach(btn => btn.classList.remove('active'));
                if (mode === 'free') document.getElementById('freeView').classList.add('active');
                if (mode === 'earth') document.getElementById('followEarth').classList.add('active');
                if (mode === 'mars') document.getElementById('followMars').classList.add('active');

                // N·∫øu kh√¥ng ph·∫£i free view, t·∫Øt k√©o th·∫£ b·∫±ng tay
                if(mode !== 'free') {
                    this.cameraX = 0;
                    this.cameraY = 0;
                }
            }

            // <<< TH√äM M·ªöI: H√†m x·ª≠ l√Ω click cho c√¥ng c·ª• ƒëo
            handleMeasureClick(e) {
                const rect = this.canvas.getBoundingClientRect();
                // Chuy·ªÉn ƒë·ªïi t·ªça ƒë·ªô click tr√™n m√†n h√¨nh v·ªÅ t·ªça ƒë·ªô trong "th·∫ø gi·ªõi" c·ªßa m√¥ ph·ªèng
                const worldX = (e.clientX - rect.left - this.canvas.width / 2) / this.cameraZoom - this.cameraX;
                const worldY = (e.clientY - rect.top - this.canvas.height / 2) / this.cameraZoom - this.cameraY;

                if (!this.measureStart) {
                    this.measureStart = { x: worldX, y: worldY };
                    this.measureEnd = null;
                    document.getElementById('distanceResult').innerHTML = "Nh·∫•p v√†o ƒëi·ªÉm th·ª© hai...";
                } else if (!this.measureEnd) {
                    this.measureEnd = { x: worldX, y: worldY };
                    const dx = this.measureEnd.x - this.measureStart.x;
                    const dy = this.measureEnd.y - this.measureStart.y;
                    const pixelDistance = Math.sqrt(dx * dx + dy * dy);
                    const realDistance = pixelDistance * this.KM_PER_PIXEL;
                    document.getElementById('distanceResult').innerHTML = 
                        `Kho·∫£ng c√°ch: <strong>${realDistance.toLocaleString('vi-VN')} km</strong>`;
                } else {
                    // B·∫Øt ƒë·∫ßu ƒëo l·∫°i
                    this.measureStart = { x: worldX, y: worldY };
                    this.measureEnd = null;
                    document.getElementById('distanceResult').innerHTML = "Nh·∫•p v√†o ƒëi·ªÉm th·ª© hai...";
                }
            }


            createStars() {
                const starsContainer = document.getElementById('stars');
                starsContainer.innerHTML = ''; // X√≥a sao c≈© n·∫øu c√≥
                for (let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    const size = (Math.random() * 2 + 1);
                    star.style.width = size + 'px';
                    star.style.height = size + 'px';
                    star.style.animationDelay = Math.random() * 3 + 's';
                    starsContainer.appendChild(star);
                }
            }

            updatePositions() {
                if (this.isPaused) return;

                const timeFactor = this.timeSpeed;

                // C·∫≠p nh·∫≠t g√≥c qu·ªπ ƒë·∫°o
                this.earth.angle += this.earth.speed * timeFactor;
                this.moon.angle += this.moon.speed * timeFactor;
                this.mars.angle += this.mars.speed * timeFactor;

                // T√≠nh to√°n v·ªã tr√≠ Tr√°i ƒê·∫•t
                this.earth.x = Math.cos(this.earth.angle) * this.earth.orbitRadius;
                this.earth.y = Math.sin(this.earth.angle) * this.earth.orbitRadius;

                // T√≠nh to√°n v·ªã tr√≠ M·∫∑t TrƒÉng (quanh Tr√°i ƒê·∫•t)
                this.moon.x = this.earth.x + Math.cos(this.moon.angle) * this.moon.orbitRadius;
                this.moon.y = this.earth.y + Math.sin(this.moon.angle) * this.moon.orbitRadius;

                // T√≠nh to√°n v·ªã tr√≠ Sao H·ªèa
                this.mars.x = Math.cos(this.mars.angle) * this.mars.orbitRadius;
                this.mars.y = Math.sin(this.mars.angle) * this.mars.orbitRadius;

                // C·∫≠p nh·∫≠t th·ªùi gian m√¥ ph·ªèng
                this.simulationDay += timeFactor;
                document.getElementById('simulationTime').textContent = 
                    `Ng√†y ${Math.floor(this.simulationDay)}`;
            }

            render() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.ctx.save();
                
                // Di chuy·ªÉn g·ªëc t·ªça ƒë·ªô ƒë·∫øn gi·ªØa m√†n h√¨nh
                this.ctx.translate(this.canvas.width / 2, this.canvas.height / 2);

                // √Åp d·ª•ng zoom
                this.ctx.scale(this.cameraZoom, this.cameraZoom);

                // C·∫≠p nh·∫≠t camera theo ch·∫ø ƒë·ªô xem
                let targetX = this.cameraX;
                let targetY = this.cameraY;

                if (this.viewMode === 'earth') {
                    targetX = -this.earth.x;
                    targetY = -this.earth.y;
                } else if (this.viewMode === 'mars') {
                    targetX = -this.mars.x;
                    targetY = -this.mars.y;
                }
                this.ctx.translate(targetX, targetY);
                
                // V·∫Ω qu·ªπ ƒë·∫°o
                if (this.showOrbits) {
                    this.drawOrbit(0, 0, this.earth.orbitRadius, 'rgba(74, 144, 226, 0.3)');
                    this.drawOrbit(0, 0, this.mars.orbitRadius, 'rgba(205, 92, 92, 0.3)');
                    this.drawOrbit(this.earth.x, this.earth.y, this.moon.orbitRadius, 'rgba(204, 204, 204, 0.3)');
                }

                // V·∫Ω c√°c thi√™n th·ªÉ
                this.celestialBodies.forEach(body => {
                    this.drawCelestialBody(body);
                });

                // V·∫Ω ƒë∆∞·ªùng ƒëo l∆∞·ªùng
                if (this.measureMode) {
                    this.drawMeasurementLine();
                }

                this.ctx.restore();
            }

            drawOrbit(centerX, centerY, radius, color) {
                this.ctx.beginPath();
                this.ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                this.ctx.strokeStyle = color;
                this.ctx.lineWidth = 1 / this.cameraZoom; // L√†m cho ƒë∆∞·ªùng k·∫ª m·∫£nh h∆°n khi zoom xa
                this.ctx.stroke();
            }

            drawCelestialBody(body) {
                const { x, y, radius, color, name } = body;
                // V·∫Ω h√†nh tinh
                this.ctx.beginPath();
                this.ctx.arc(x, y, radius, 0, Math.PI * 2);
                this.ctx.fillStyle = color;
                this.ctx.fill();
                
                // Th√™m hi·ªáu ·ª©ng √°nh s√°ng cho M·∫∑t Tr·ªùi
                if (name === 'M·∫∑t Tr·ªùi') {
                    const gradient = this.ctx.createRadialGradient(x, y, 0, x, y, radius * 2.5);
                    gradient.addColorStop(0, 'rgba(253, 184, 19, 0.8)');
                    gradient.addColorStop(0.5, 'rgba(253, 184, 19, 0.4)');
                    gradient.addColorStop(1, 'rgba(253, 184, 19, 0)');
                    this.ctx.fillStyle = gradient;
                    this.ctx.arc(x, y, radius * 2.5, 0, Math.PI * 2);
                    this.ctx.fill();
                }

                // V·∫Ω t√™n h√†nh tinh
                const fontSize = 12 / this.cameraZoom;
                this.ctx.fillStyle = 'white';
                this.ctx.font = `${fontSize}px Arial`;
                this.ctx.textAlign = 'center';
                this.ctx.fillText(name, x, y + radius + 15 / this.cameraZoom);
            }

            drawMeasurementLine() {
                if (!this.measureStart) return;

                this.ctx.beginPath();
                this.ctx.arc(this.measureStart.x, this.measureStart.y, 5 / this.cameraZoom, 0, Math.PI * 2);
                this.ctx.fillStyle = '#4CAF50';
                this.ctx.fill();

                if (this.measureEnd) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.measureStart.x, this.measureStart.y);
                    this.ctx.lineTo(this.measureEnd.x, this.measureEnd.y);
                    this.ctx.strokeStyle = '#4CAF50';
                    this.ctx.lineWidth = 2 / this.cameraZoom;
                    this.ctx.stroke();

                    this.ctx.beginPath();
                    this.ctx.arc(this.measureEnd.x, this.measureEnd.y, 5 / this.cameraZoom, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#4CAF50';
                    this.ctx.fill();
                }
            }

            animate() {
                this.updatePositions();
                this.render();
                requestAnimationFrame(() => this.animate());
            }
        }

        // Kh·ªüi t·∫°o game
        const game = new SolarSystemExplorer();
    </script>
</body>
</html>